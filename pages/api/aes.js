// bad code but deal with it
var aes256 = require("aes256");

let emstr = `ぃゲグおえジぉコｐズゐ○がく仇サザ别梆ヰきかぅ娥ю拆ケ答い叼ゴあぎぇ佛筐桂吼ぁ火金攫吼葛桂火拣金筐攫げ锔こ攫Φ筐Χｐ火ΨΥ└娥ю┾ΡΡㄢΡ┾ΠΠㄢΠ扁锔别扁锔┾ΤΤㄢΤ┾ΣΣㄢΣ叼答拆斥锔仇斥锔锔锔封锔佛封锔锔锔碉锔碉碉锔┾锔锔ㄢ锔┾攫攫ㄢ攫┾仇仇ㄢ仇┾ㄢ┾ゐゐㄢゐ┾ㄢ┾ㄢ┾火火ㄢ火┾拣拣ㄢ拣┾ююㄢю┾ㄢ┾ㄢ┾ㄢ┾锔锔ㄢ锔┾ㄢ┾锔锔ㄢ锔扳锔梆扳锔さ锔ささ锔葛ごシΩ锔ΩΩ锔光锔桂光锔ざ锔锔锔锔锔锔锔锔锔锔锔锔锔锔拣ぐけ┾拣拣ㄢ拣锔锔锔锔锔锔锔锔锔锔锔锔う锔うう锔し锔しし锔锔锔锔锔锔锔锔锔锔锔こ吼锔锔答┾金金ㄢ金┾拣拣ㄢ拣垛锔娥垛锔┾ΟΟㄢΟ锔锔锔锔锔锔┾わㄢわ┾わ┾わㄢわ┾わㄢ┾ㄢ┾юㄢ┾рㄢ┾ㄢ┾рюㄢㄢㄢㄢюㄢㄢрㄢㄢㄢㄢрю┾┾┾┾ю┾┾р┾┾┾┾рюㄢㄢㄢюㄢрㄢрю┾┾┾ю┾р┾рюｐゐヰС锔У○Ф娥ソゼ吼ВГДЕセ┐┍┎┏ゾタ○┌Б拣火火烩火火火火烩火火火火火火火火火烩火火烩火火火火火火火げ火烩火火こ火火Φ火Χ火火火火火娥火ю火火火火火火烩Ρ烩Ρ烩Ρ烩Π烩Π烩Π别烩锔别火别烩锔烩Τ烩Τ烩Τ烩Σ烩Σ烩Σ火叼火火答火拆火仇烩锔仇火仇烩锔火烩锔火烩锔佛烩锔佛火佛烩锔烩锔火烩锔叼烩锔叼火叼烩锔烩锔烩锔烩锔烩攫烩攫烩攫烩仇烩仇烩仇烩烩烩烩ゐ烩ゐ烩ゐ烩烩烩烩烩烩烩火烩火烩火烩拣烩拣烩拣烩ю烩ю烩ю烩烩烩烩烩烩烩烩烩烩锔烩锔烩锔烩烩烩烩锔烩锔烩锔梆烩锔梆火梆烩锔さ烩锔さ火さ烩锔葛火ご火シ火Ω烩锔Ω火Ω烩锔桂烩锔桂火桂烩锔ざ火烩火烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔拣火ぐ火け火烩拣烩拣烩拣烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔う烩锔う火う烩锔し烩锔し火し烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔烩锔火烩锔火吼火答火烩金烩金烩金烩拣烩拣烩拣娥烩锔娥火娥烩锔烩Ο烩Ο烩Ο烩锔火烩锔烩锔火烩锔烩锔火烩锔火烩火火火烩锔火烩锔火火烩锔火烩锔烩锔火烩锔ｐ烩锔ｐ火ｐ烩锔烩锔火烩锔桂烩锔桂烩桂烩锔烩锔火烩锔答烩锔答火答烩锔叼烩锔叼火叼烩锔じ烩锔じ火じ烩锔そ烩锔そ火そ烩锔ぞ烩锔ぞ火ぞ烩锔す烩锔す火す烩锔烩锔火烩锔火火拣拣尖拣拣拣拣尖拣拣拣拣拣拣拣拣拣尖拣拣尖拣拣拣拣拣拣拣げ拣尖拣拣こ拣拣Φ拣Χ拣拣火拣拣娥拣ю拣拣拣拣拣拣尖Ρ尖Ρ尖Ρ尖Π尖Π尖Π别尖锔别拣别尖锔尖Τ尖Τ尖Τ尖Σ尖Σ尖Σ拣叼拣拣答拣拆拣仇尖锔仇拣仇尖锔拣尖锔拣尖锔佛尖锔佛拣佛尖锔尖锔拣尖锔叼尖锔叼拣叼尖锔尖锔尖锔尖锔尖攫尖攫尖攫尖仇尖仇尖仇尖尖尖尖ゐ尖ゐ尖ゐ尖尖尖尖尖尖尖火尖火尖火尖拣尖拣尖拣尖ю尖ю尖ю尖尖尖尖尖尖尖尖尖尖锔尖锔尖锔尖尖尖尖锔尖锔尖锔梆尖锔梆拣梆尖锔さ尖锔さ拣さ尖锔葛拣ご拣シ拣Ω尖锔Ω拣Ω尖锔桂尖锔桂拣桂尖锔ざ拣尖拣尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔拣拣ぐ拣け拣尖拣尖拣尖拣尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔う尖锔う拣う尖锔し尖锔し拣し尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔拣吼拣答拣尖金尖金尖金尖拣尖拣尖拣娥尖锔娥拣娥尖锔尖Ο尖Ο尖Ο尖锔拣尖锔尖锔拣尖锔尖锔拣尖锔拣尖拣拣拣尖锔拣尖锔拣拣尖锔拣尖锔尖锔拣尖锔ｐ尖锔ｐ拣ｐ尖锔尖锔拣尖锔桂尖锔桂尖桂尖锔尖锔拣尖锔答尖锔答拣答尖锔叼尖锔叼拣叼尖锔じ尖锔じ拣じ尖锔そ尖锔そ拣そ尖锔ぞ尖锔ぞ拣ぞ尖锔す尖锔す拣す尖锔尖锔拣尖锔拣拣金金解金金金金解金金金金金金金金金解金金解金金金金金金金げ金解金金こ金金Φ金Χ金金火金金娥金ю金金金金金金解Ρ解Ρ解Ρ解Π解Π解Π别解锔别金别解锔解Τ解Τ解Τ解Σ解Σ解Σ金叼金金答金拆金仇解锔仇金仇解锔金解锔金解锔佛解锔佛金佛解锔解锔金解锔叼解锔叼金叼解锔解锔解锔解锔解攫解攫解攫解仇解仇解仇解解解解ゐ解ゐ解ゐ解解解解解解解火解火解火解拣解拣解拣解ю解ю解ю解解解解解解解解解解锔解锔解锔解解解解锔解锔解锔梆解锔梆金梆解锔さ解锔さ金さ解锔葛金ご金シ金Ω解锔Ω金Ω解锔桂解锔桂金桂解锔ざ金解金解锔金解锔解锔金解锔解锔金解锔解锔金解锔解锔金解锔拣金ぐ金け金解拣解拣解拣解锔金解锔解锔金解锔解锔金解锔解锔金解锔解锔金解锔解锔金解锔う解锔う金う解锔し解锔し金し解锔解锔金解锔解锔金解锔解锔金解锔解锔金解锔解锔金解锔金吼金答金解金解金解金解拣解拣解拣娥解锔娥金娥解锔解Ο解Ο解Ο解锔金解锔解锔金解锔解锔金解锔金解金金金解锔金解锔金金解锔金解锔解锔金解锔ｐ解锔ｐ金ｐ解锔解锔金解锔桂解锔桂解桂解锔解锔金解锔答解锔答金答解锔叼解锔叼金叼解锔じ解锔じ金じ解锔そ解锔そ金そ解锔ぞ解锔ぞ金ぞ解锔す解锔す金す解锔解锔金解锔金金攫攫锯攫攫攫攫锯攫攫攫攫攫攫攫攫攫锯攫攫锯攫攫攫攫攫攫攫げ攫锯攫攫こ攫攫Φ攫Χ攫攫火攫攫娥攫ю攫攫攫攫攫攫锯Ρ锯Ρ锯Ρ锯Π锯Π锯Π别锯锔别攫别锯锔锯Τ锯Τ锯Τ锯Σ锯Σ锯Σ攫叼攫攫答攫拆攫仇锯锔仇攫仇锯锔攫锯锔攫锯锔佛锯锔佛攫佛锯锔锯锔攫锯锔叼锯锔叼攫叼锯锔锯锔锯锔锯锔锯攫锯攫锯攫锯仇锯仇锯仇锯锯锯锯ゐ锯ゐ锯ゐ锯锯锯锯锯锯锯火锯火锯火锯拣锯拣锯拣锯ю锯ю锯ю锯锯锯锯锯锯锯锯锯锯锔锯锔锯锔锯锯锯锯锔锯锔锯锔梆锯锔梆攫梆锯锔さ锯锔さ攫さ锯锔葛攫ご攫シ攫Ω锯锔Ω攫Ω锯锔桂锯锔桂攫桂锯锔ざ攫锯攫锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔拣攫ぐ攫け攫锯拣锯拣锯拣锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔う锯锔う攫う锯锔し锯锔し攫し锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔攫吼攫答筐锯金锯金锯金锯拣锯拣锯拣娥锯锔娥攫娥锯锔锯Ο锯Ο锯Ο锯锔攫锯锔锯锔攫锯锔锯锔攫锯锔攫锯攫攫攫锯锔攫锯锔攫攫锯锔攫锯锔锯锔攫锯锔ｐ锯锔ｐ攫ｐ锯锔锯锔攫锯锔桂锯锔桂锯桂锯锔锯锔攫锯锔答锯锔答攫答锯锔叼锯锔叼攫叼锯锔じ锯锔じ攫じ锯锔そ锯锔そ攫そ锯锔ぞ锯锔ぞ攫ぞ锯锔す锯锔す攫す锯锔锯锔攫锯锔攫攫筐筐库筐筐筐筐库筐筐筐筐筐筐筐筐筐库筐筐库筐筐筐筐筐筐筐げ筐库筐筐こ筐筐Φ筐Χ筐筐火筐筐娥筐ю`;
let emarr = Array.from(emstr);

const emToTextMap = new Map();
for (var i = 0; i < emarr.length; i++) {
    emToTextMap.set(emarr[i], String.fromCharCode(i));
}

export const encrypt = (key, text) => {
    return aes256.encrypt(key, text);
}
export const decrypt = (key, text) => {
    return aes256.decrypt(key, text);
}
export const textToEmoji = (text) => {
    let ret = '';
    for (var i = 0; i < text.length; i++) {
        var code = text.charCodeAt(i);
        ret = ret + emarr[code];
    }
    return ret;
}
export const emojiToText = (emText) => {
    let emTextArr = Array.from(emText);
    let ret = '';
    for (var i = 0; i < emTextArr.length; i++) {
        let char = emarr.indexOf(emTextArr[i]);
        if (char===-1) {
            return '';
        }
        ret = ret + String.fromCharCode(char);
    }
    return ret;
}
export const embedEmoji = (emojies, filler) => {
    let emojiArray = Array.from(emojies);

    for (var i = 0; i < emojiArray.length; i++) {
        let insertAt = Math.floor(Math.random() * filler.length);
        filler = filler.slice(0, insertAt) + '' + filler.slice(insertAt);
    }
    let fillerArray = Array.from(filler);
    filler = '';
    var j = 0;
    for (var i = 0; i < fillerArray.length; i++) {
        if (fillerArray[i]==='') {
            filler = filler + emojiArray[j];
            j++;
        } else {
            filler = filler + fillerArray[i];
        }
    }
    return filler;
}
export const extractEmoji = (text) => {
    let textArray = Array.from(text);
    let ems = '';
    let filler = '';
    for (var i = 0; i < textArray.length; i++) {
        if (/\p{Extended_Pictographic}/u.test(textArray[i])) {
            ems += textArray[i];
        } else {
            filler += textArray[i];
        }
    }
    return [ems, filler];
}